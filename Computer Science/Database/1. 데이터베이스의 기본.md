# 데이터베이스의 기본

## 목차

- [개요](#개요)
- [핵심 용어](#핵심-용어)
- [엔티티](#엔티티)
    - [약한 엔티티와 강한 엔티티](#약한-엔티티와-강한-엔티티)
- [릴레이션](#릴레이션-relation)
    - [테이블과 컬렉션](#테이블과-컬렉션)
- [속성](#속성-attribute)
- [도메인](#도메인-domain)
- [필드와 레코드](#필드와-레코드)
    - [필드 타입](#필드-타입)
- [관계](#관계)
    - [관계 화살표](#관계-화살표)
    - [관계도](#관계도)
- [키](#키)
- [참고 자료](#참고-자료)

## 개요
데이터 베이스를 이루고 있는 기본적인 것들에 대해 알아봅니다.

## 핵심 용어
- `데이터 베이스`: 일정한 규칙, 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음
- `DBMS`(DataBase Management System): 데이터베이스를 제어, 관리하는 통합 시스템

## 엔티티 (Entity)

- 의미: 여러 개의 속성을 지닌 명사

### 약한 엔티티와 강한 엔티티

- 강한 엔티티: 다른 엔티티에 의존하지 않고 독립적으로 존재할 수 있는 엔티티
- 약한 엔티티: 다른 엔티티에 종속적인 엔티티

## 릴레이션 (relation)

- 의미: 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
- 특징
    - 데이터베이스가 엔티티에 관한 데이터를 릴레이션 단위로 저장한다.
    - **관계형 데이터베이스**에서는 **테이블**, **NoSQL 데이터베이스**에서는 **컬렉션**이라고 한다.

### 테이블과 컬렉션

![image](https://github.com/k2645/basic-computer-science/assets/62226667/e9716b8c-4089-46e8-940c-8151ae0d83a9)

- 대표적인 관계형 데이터베이스 MySQL 구조: 레코드 - 테이블 - 데이터베이스
- 대표적인 NoSQL 데이터베이스 MongoDB 구조: 도큐먼트 - 컬렉션 - 데이터베이스

## 속성 (attribute)

- 의미: 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

## 도메인 (Domain)

- 의미: 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값들의 집합

## 필드와 레코드

<img width="650" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/c891c3fa-1496-4e11-936d-14d0cffec82e">

### 필드 타입

*MySQL 기준으로 설명*

- 숫자 타입

    |타입|용량(Byte)|최솟값(부호 있음)|최솟값(부호 없음)|최댓값(부호 있음)|최댓값(부호 없음)|
    |-|-|-|-|-|-|
    |`TINYINY`|1|-128|0|127|255|
    |`SMALLINT`|2|-32768|0|32767|65535|
    |`MEDIUNMINT`|3|-8388608|0|8388607|16777215|
    |`INT`|4|-2^31|0|2^31 - 1|2^32 - 1|
    |`BIGINT`|8|-2^63|0|2^63 - 1|2^64 - 1|

- 날짜 타입

    |타입|특징|지원 범위|용량|
    |-|-|-|-|
    |`DATE`|날짜 부분은 있지만 시간 부분은 없는 값에 사용|`1000-01-01` ~ `9999-12-31`|3 byte|
    |`DATETIME`|날짜 및 시간 부분 모두 포함하는 값에 사용|`1000-01-01` `00:00:00` ~ `9999-21-31` `23:59:59`|8 byte|
    |`TIMESTAMP`|날짜 및 시간 부분 모두 포함하는 값에 사용|`1970-01-01` `00:00:01` ~ `2038-01-19` `03:14:07`|4 byte|

- 문자 타입

    - `CHAR`과 `VARCHAR`
        - `CHAR`과 `VARCHAR` 모두 숫자를 입력하여 몇 자 까지 입력할지 정한다. ex) `CHAR(30)`, `VARCHAR(1000)`
        - `CHAR`은 **고정 길이 문자열**, `VARCHAR`은 **가변 길이 문자열**이다.
        - `CHAR`은 테이블을 생성할 때 선언할 길이로 고정되며 길이는 0에서 255 사이 값을 가진다.
        - `VARCHAR`의 길이는 0에서 65,535 사이 값으로 지정할 수 있으며 입력된 데이터에 따라 용량을 가변시켜 저장한다.
        - `CHAR`은 부동의 길이를 가진 데이터인 경우, `VARCHAR`은 유동적인 길이를 가진 데이터인 경우에 효율적이다.
    
    - `TEXT`와 `BLOB`
        - `TEXT`와 `BLOB` 모두 큰 데이터를 저장할 떄 쓰는 타입이다.
        - `TEXT`는 **큰 문자열** 저장에 쓰인다. ex) 게시판 게시글의 본문 저장
        - `BLOB`은 **이미지, 동영상** 등 큰 데이터 저장에 쓰인다.

    - `ENUM`과 `SET`
        - `ENUM`과 `SET` 모두 문자열을 열거한 타입이다.
        - `ENUM`은 ENUM('x-small', 'small', 'medium', 'large', 'x-large') 형태로 쓰인다.
        - `ENUM`은 **단일 선택**만 가능하며 ENUM 리스트에 없는 값을 삽입하면 **빈 문자열이 삽입**된다.
        - `ENUM`은 매핑되어 저장되기 때문에 **메모리를 적게 사용**하는 이점을 얻고 최대 65,535개의 요소들을 넣을 수 있다.
        - `SET`은 **여러 개의 데이터를 선택**할 수 있다.
        - `SET`은 **비트 단위의 연산**을 할 수 있으며 회대 64개의 요소를 집어넣을 수 있다.

## 관계

### 관계 화살표

<img width="600" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/720e5a9b-529b-4f90-8b18-b81205779936">

### 관계도

|1:1 관계|N:1 관계|N:M 관계|
|:-:|:-:|:-:|
|<img width="350" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/bcf76e22-348b-4ecc-a491-59a6336b456c">|<img width="350" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/8aa2a18f-6ea9-49ae-be7b-7a9c50ec7565">|<img width="350" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/e4fa8b19-b1b4-413f-9f95-f6a3f05976bb">|

## 키

- 의미: 테이블 가의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치
- 키 간 관계

    <img width="600" alt="image" src="https://github.com/k2645/basic-computer-science/assets/62226667/449bdcbe-4d99-4811-ae67-de5923dc6027">

- 특징
    - 슈퍼키는 **유일성**이 있다.
    - 후보키는 유일성에 **최소성**까지 갖춘 키이다.
    - 대체키는 후보키 중 기본키가 되지 못한 키들이다.

> `유일성`: 중복되는 값이 없는 성질 <br>
> `후보키`: 필드를 조합하지 않고 최소 필드만 써서 키를 형성할 수 있는 성질

- **기본키(Primary Key)**
    - **유일성**과 **최소성**을 만족하는 키이다.
    - 테이블의 데이터 중 **고유하게 존재하는 속성**이다.
    - 기본키에 해당하는 데이터는 중복되는 값이 있어서는 안된다.
    - 기본키는 자연키 또는 인조키 중 골라 설정한다.

    > `자연키`: 중복된 값들을 제외하며 중복되지 않는 것을 **자엽스레 뽑다가 나오는 키**로 연젠가는 변한 수 있는 속성을 가진다. <br> 
    > `인조키`: **인위적으로 생성한 키**를 의미하며 자연키와는 대조적으로 변하지 않는다.

- **외래키(Foreign Key)**: 다른 테이블의 기본키를 그대로 참조하는 값으로 개체와의 관계를 식별하는 데 사용한다.

- **후보키(candidate key)**: 기본키가 될 수 있는 후보들이다.

- **대체키(alternate key)**: 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하는 남은 후보키들이다.

- **슈퍼키(super key)**: 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키이다.

## 참고 자료
- 이미지 출처
    - [테이블과 컬렉션](https://jaehoney.tistory.com/314)
    - [필드와 레코드](https://velog.io/@impala/DB-Data-Storage-Structure)